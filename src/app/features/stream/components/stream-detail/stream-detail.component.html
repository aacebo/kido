<div
  class="stream-detail--messenger"
  [style.flex]="activeMessageContent ? '1 1 50%' : '1 1 auto'"
  [formGroup]="form"
>
  <div
    *ngIf="loading[stream._id]"
    [style.flex]="'1 1 auto'"
  ></div>

  <kido-messenger
    *ngIf="!loading[stream._id]"
    [messages]="messages[stream._id]"
    [active]="activeMessageId"
    (action)="onMessageAction($event)"
  ></kido-messenger>

  <kido-json-editor
    sendable
    expandable
    copyable
    formControlName="message"
    [raw]="!form.value.json"
    (rawChange)="onJsonChanged($event)"
    (copyValue)="onPropertyValueClicked($event)"
    (send)="onSend()"
  ></kido-json-editor>
</div>

<div
  *ngIf="activeMessageContent"
  class="stream-detail--json"
  [style.flex]="activeMessageContent ? '1 1 50%' : '1 1 auto'"
>
  <kido-json-viewer
    closeable
    [json]="activeMessageContent"
    (propertyValueClicked)="onPropertyValueClicked($event)"
    (closeClicked)="onClearMessage()"
  ></kido-json-viewer>
</div>
