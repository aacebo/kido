<div
  class="stream-detail--messenger"
  [style.flex]="activeMessageContent ? '1 1 50%' : '1 1 auto'"
  [formGroup]="form"
>
  <div
    *ngIf="loading[stream._id]"
    [style.flex]="'1 1 auto'"
  ></div>

  <kido-messenger
    *ngIf="!loading[stream._id]"
    [messages]="messages[stream._id]"
    [active]="activeMessageId"
    (action)="onMessageAction($event)"
  ></kido-messenger>

  <div class="stream-detail--json-editor">
    <kido-input
      *ngIf="stream.type !== StreamType.WebSocket && stream.type !== StreamType.SockJS"
      formControlName="event"
      placeholder="Event..."
    ></kido-input>

    <kido-json-editor
      sendable
      expandable
      copyable
      formControlName="message"
      [class.eventable]="stream.type !== StreamType.WebSocket && stream.type !== StreamType.SockJS"
      [raw]="!form.value.json"
      (rawChange)="onJsonChanged($event)"
      (copyValue)="onPropertyValueClicked($event)"
      (send)="onSend()"
    ></kido-json-editor>
  </div>
</div>

<div
  *ngIf="activeMessageContent"
  class="stream-detail--json"
  [style.flex]="activeMessageContent ? '1 1 50%' : '1 1 auto'"
>
  <kido-json-viewer
    closeable
    expanded
    [json]="activeMessageContent"
    (propertyValueClicked)="onPropertyValueClicked($event)"
    (closeClicked)="onClearMessage()"
  ></kido-json-viewer>
</div>
