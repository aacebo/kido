<ngb-tabset
  [class.mac]="systemService.isMac$ | async"
  (tabChange)="onStreamTabChange($event)"
>
  <ngb-tab
    *ngFor="let stream of streamService.entities$ | async"
    [id]="stream._id"
    [title]="stream.name"
  >
    <ng-template ngbTabContent>
      <kido-stream-detail-header
        [form]="form"
        [stream]="stream"
        [connected]="streamService.connected$ | async"
        [connecting]="streamService.connecting$ | async"
        (save)="onSave(stream)"
        (connect)="onConnect(stream)"
        (disconnect)="onDisconnect(stream)"
      ></kido-stream-detail-header>

      <kido-stream-detail-sidebar
        [open]="menu$ | async"
      >
        <kido-stream-detail
          [form]="form"
          [stream]="stream"
          [activeMessageId]="messageService.activeId$ | async"
          [messages]="messageService.messages$ | async"
          [connected]="streamService.connected$ | async"
          [connecting]="streamService.connecting$ | async"
          (selectMessage)="onSelectMessage($event)"
          (openMessage)="onOpenMessage($event)"
          (removeMessage)="onRemoveMessage($event)"
          (send)="onSend($event)"
        ></kido-stream-detail>
      </kido-stream-detail-sidebar>
    </ng-template>
  </ngb-tab>
</ngb-tabset>
